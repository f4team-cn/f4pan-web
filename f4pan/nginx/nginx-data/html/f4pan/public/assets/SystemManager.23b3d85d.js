import{s as L,a as z}from"./index.esm.ea66545a.js";import{B as K,U as S,p as b,E as g,R,x as V,o as f,e as m,J as O,K as j,f as d,z as A,D as C,y as M,t as k,g as h,h as E,q as J,v as G,T as Q,m as W,d as X,ad as Y,r as I,_ as Z,ar as ee,i as p,k as te,j as x,s as _,L as B,as as ae,at as ne,au as ie,av as re}from"./index.11a12647.js";import{s as oe}from"./panel.esm.ee925fe8.js";import{s as U}from"./divider.esm.d66f1fc9.js";import{s as le}from"./textarea.esm.5236e5af.js";import{s as P}from"./radiobutton.esm.2c6d9749.js";import"./index.esm.b3e12656.js";import"./index.esm.f152c46b.js";var de={root:"p-accordion p-component",tab:{root:function(e){var a=e.instance,i=e.index;return["p-accordion-tab",{"p-accordion-tab-active":a.isTabActive(i)}]},header:function(e){var a=e.instance,i=e.tab,l=e.index;return["p-accordion-header",{"p-highlight":a.isTabActive(l),"p-disabled":a.getTabProp(i,"disabled")}]},headerAction:"p-accordion-header-link p-accordion-header-action",headerIcon:"p-accordion-toggle-icon",headerTitle:"p-accordion-header-text",toggleableContent:"p-toggleable-content",content:"p-accordion-content"}},se=K.extend({name:"accordion",classes:de}),ue={name:"BaseAccordion",extends:V,props:{multiple:{type:Boolean,default:!1},activeIndex:{type:[Number,Array],default:null},lazy:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:se,provide:function(){return{$parentInstance:this}}},N={name:"Accordion",extends:ue,inheritAttrs:!1,emits:["update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{id:this.$attrs.id,d_activeIndex:this.activeIndex}},watch:{"$attrs.id":function(e){this.id=e||S()},activeIndex:function(e){this.d_activeIndex=e}},mounted:function(){this.id=this.id||S()},methods:{isAccordionTab:function(e){return e.type.name==="AccordionTab"},isTabActive:function(e){return this.multiple?this.d_activeIndex&&this.d_activeIndex.includes(e):this.d_activeIndex===e},getTabProp:function(e,a){return e.props?e.props[a]:void 0},getKey:function(e,a){return this.getTabProp(e,"header")||a},getTabHeaderActionId:function(e){return"".concat(this.id,"_").concat(e,"_header_action")},getTabContentId:function(e){return"".concat(this.id,"_").concat(e,"_content")},getTabPT:function(e,a,i){var l=this.tabs.length,n={props:e.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:i,count:l,first:i===0,last:i===l-1,active:this.isTabActive(i)}};return b(this.ptm("tab.".concat(a),{tab:n}),this.ptm("accordiontab.".concat(a),{accordiontab:n}),this.ptm("accordiontab.".concat(a),n),this.ptmo(this.getTabProp(e,"pt"),a,n))},onTabClick:function(e,a,i){this.changeActiveIndex(e,a,i),this.$emit("tab-click",{originalEvent:e,index:i})},onTabKeyDown:function(e,a,i){switch(e.code){case"ArrowDown":this.onTabArrowDownKey(e);break;case"ArrowUp":this.onTabArrowUpKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onTabEnterKey(e,a,i);break}},onTabArrowDownKey:function(e){var a=this.findNextHeaderAction(e.target.parentElement.parentElement);a?this.changeFocusedTab(e,a):this.onTabHomeKey(e),e.preventDefault()},onTabArrowUpKey:function(e){var a=this.findPrevHeaderAction(e.target.parentElement.parentElement);a?this.changeFocusedTab(e,a):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey:function(e){var a=this.findFirstHeaderAction();this.changeFocusedTab(e,a),e.preventDefault()},onTabEndKey:function(e){var a=this.findLastHeaderAction();this.changeFocusedTab(e,a),e.preventDefault()},onTabEnterKey:function(e,a,i){this.changeActiveIndex(e,a,i),e.preventDefault()},findNextHeaderAction:function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=a?e:e.nextElementSibling,l=g.findSingle(i,'[data-pc-section="header"]');return l?g.getAttribute(l,"data-p-disabled")?this.findNextHeaderAction(l.parentElement):g.findSingle(l,'[data-pc-section="headeraction"]'):null},findPrevHeaderAction:function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=a?e:e.previousElementSibling,l=g.findSingle(i,'[data-pc-section="header"]');return l?g.getAttribute(l,"data-p-disabled")?this.findPrevHeaderAction(l.parentElement):g.findSingle(l,'[data-pc-section="headeraction"]'):null},findFirstHeaderAction:function(){return this.findNextHeaderAction(this.$el.firstElementChild,!0)},findLastHeaderAction:function(){return this.findPrevHeaderAction(this.$el.lastElementChild,!0)},changeActiveIndex:function(e,a,i){if(!this.getTabProp(a,"disabled")){var l=this.isTabActive(i),n=l?"tab-close":"tab-open";this.multiple?l?this.d_activeIndex=this.d_activeIndex.filter(function(o){return o!==i}):this.d_activeIndex?this.d_activeIndex.push(i):this.d_activeIndex=[i]:this.d_activeIndex=this.d_activeIndex===i?null:i,this.$emit("update:activeIndex",this.d_activeIndex),this.$emit(n,{originalEvent:e,index:i})}},changeFocusedTab:function(e,a){if(a&&(g.focus(a),this.selectOnFocus)){var i=parseInt(a.parentElement.parentElement.dataset.pcIndex,10),l=this.tabs[i];this.changeActiveIndex(e,l,i)}}},computed:{tabs:function(){var e=this;return this.$slots.default().reduce(function(a,i){return e.isAccordionTab(i)?a.push(i):i.children&&i.children instanceof Array&&i.children.forEach(function(l){e.isAccordionTab(l)&&a.push(l)}),a},[])}},components:{ChevronDownIcon:L,ChevronRightIcon:z},directives:{ripple:R}};function w(t){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(t)}function H(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),a.push.apply(a,i)}return a}function T(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?H(Object(a),!0).forEach(function(i){ce(t,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))})}return t}function ce(t,e,a){return e=pe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pe(t){var e=he(t,"string");return w(e)=="symbol"?e:String(e)}function he(t,e){if(w(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var i=a.call(t,e||"default");if(w(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fe=["data-pc-index","data-p-active"],be=["data-p-highlight","data-p-disabled"],ve=["id","tabindex","aria-disabled","aria-expanded","aria-controls","onClick","onKeydown"],me=["id","aria-labelledby"];function ye(t,e,a,i,l,n){return f(),m("div",b({class:t.cx("root")},t.ptmi("root")),[(f(!0),m(O,null,j(n.tabs,function(o,s){return f(),m("div",b({key:n.getKey(o,s),class:t.cx("tab.root",{tab:o,index:s})},n.getTabPT(o,"root",s),{"data-pc-name":"accordiontab","data-pc-index":s,"data-p-active":n.isTabActive(s)}),[d("div",b({style:n.getTabProp(o,"headerStyle"),class:[t.cx("tab.header",{tab:o,index:s}),n.getTabProp(o,"headerClass")]},T(T({},n.getTabProp(o,"headerProps")),n.getTabPT(o,"header",s)),{"data-p-highlight":n.isTabActive(s),"data-p-disabled":n.getTabProp(o,"disabled")}),[d("a",b({id:n.getTabHeaderActionId(s),class:t.cx("tab.headerAction"),tabindex:n.getTabProp(o,"disabled")?-1:t.tabindex,role:"button","aria-disabled":n.getTabProp(o,"disabled"),"aria-expanded":n.isTabActive(s),"aria-controls":n.getTabContentId(s),onClick:function(F){return n.onTabClick(F,o,s)},onKeydown:function(F){return n.onTabKeyDown(F,o,s)}},T(T({},n.getTabProp(o,"headeractionprops")),n.getTabPT(o,"headeraction",s))),[o.children&&o.children.headericon?(f(),A(C(o.children.headericon),{key:0,isTabActive:n.isTabActive(s),active:n.isTabActive(s),index:s},null,8,["isTabActive","active","index"])):n.isTabActive(s)?(f(),A(C(t.$slots.collapseicon?t.$slots.collapseicon:t.collapseIcon?"span":"ChevronDownIcon"),b({key:1,class:[t.cx("tab.headerIcon"),t.collapseIcon],"aria-hidden":"true"},n.getTabPT(o,"headericon",s)),null,16,["class"])):(f(),A(C(t.$slots.expandicon?t.$slots.expandicon:t.expandIcon?"span":"ChevronRightIcon"),b({key:2,class:[t.cx("tab.headerIcon"),t.expandIcon],"aria-hidden":"true"},n.getTabPT(o,"headericon",s)),null,16,["class"])),o.props&&o.props.header?(f(),m("span",b({key:3,class:t.cx("tab.headerTitle")},n.getTabPT(o,"headertitle",s)),M(o.props.header),17)):k("",!0),o.children&&o.children.header?(f(),A(C(o.children.header),{key:4})):k("",!0)],16,ve)],16,be),h(Q,b({name:"p-toggleable-content"},n.getTabPT(o,"transition",s)),{default:E(function(){return[!t.lazy||n.isTabActive(s)?J((f(),m("div",b({key:0,id:n.getTabContentId(s),style:n.getTabProp(o,"contentStyle"),class:[t.cx("tab.toggleableContent"),n.getTabProp(o,"contentClass")],role:"region","aria-labelledby":n.getTabHeaderActionId(s)},T(T({},n.getTabProp(o,"contentProps")),n.getTabPT(o,"toggleablecontent",s))),[d("div",b({class:t.cx("tab.content")},n.getTabPT(o,"content",s)),[(f(),A(C(o)))],16)],16,me)),[[G,t.lazy?!0:n.isTabActive(s)]]):k("",!0)]}),_:2},1040)],16,fe)}),128))],16)}N.render=ye;var ge={},_e={name:"BaseAccordionTab",extends:V,props:{header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:ge,provide:function(){return{$parentInstance:this}}},$={name:"AccordionTab",extends:_e,inheritAttrs:!1};function Te(t,e,a,i,l,n){return W(t.$slots,"default")}$.render=Te;var Ae={root:{position:"relative"}},Fe={root:function(e){var a=e.instance,i=e.props;return["p-inputswitch p-component",{"p-highlight":a.checked,"p-disabled":i.disabled,"p-invalid":i.invalid}]},input:"p-inputswitch-input",slider:"p-inputswitch-slider"},Ce=K.extend({name:"inputswitch",classes:Fe,inlineStyles:Ae}),we={name:"BaseInputSwitch",extends:V,props:{modelValue:{type:null,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Ce,provide:function(){return{$parentInstance:this}}},q={name:"InputSwitch",extends:we,inheritAttrs:!1,emits:["update:modelValue","change","focus","blur"],methods:{getPTOptions:function(e){var a=e==="root"?this.ptmi:this.ptm;return a(e,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(e){if(!this.disabled&&!this.readonly){var a=this.checked?this.falseValue:this.trueValue;this.$emit("update:modelValue",a),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)}},computed:{checked:function(){return this.modelValue===this.trueValue}}},ke=["data-p-highlight","data-p-disabled"],Ee=["id","checked","tabindex","disabled","readonly","aria-checked","aria-labelledby","aria-label","aria-invalid"];function De(t,e,a,i,l,n){return f(),m("div",b({class:t.cx("root"),style:t.sx("root")},n.getPTOptions("root"),{"data-p-highlight":n.checked,"data-p-disabled":t.disabled}),[d("input",b({id:t.inputId,type:"checkbox",role:"switch",class:[t.cx("input"),t.inputClass],style:t.inputStyle,checked:n.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-checked":n.checked,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return n.onFocus&&n.onFocus.apply(n,arguments)}),onBlur:e[1]||(e[1]=function(){return n.onBlur&&n.onBlur.apply(n,arguments)}),onChange:e[2]||(e[2]=function(){return n.onChange&&n.onChange.apply(n,arguments)})},n.getPTOptions("input")),null,16,Ee),d("span",b({class:t.cx("slider")},n.getPTOptions("slider")),null,16)],16,ke)}q.render=De;const Ie={class:"col-12"},xe={class:"card p-fluid"},Pe={class:"field"},Ve=d("label",{for:"require"},"\u89E3\u6790\u5BC6\u94A5",-1),Be={class:"grid"},Se={class:"col-12 md:col-4"},Ue={class:"field-radiobutton mb-0"},He=d("label",{for:"dynamic"},"\u52A8\u6001\u5BC6\u94A5",-1),Ke={class:"col-12 md:col-4"},Oe={class:"field-radiobutton mb-0"},je=d("label",{for:"fixed"},"\u56FA\u5B9A\u5BC6\u94A5",-1),Ne={class:"col-12 md:col-4"},$e={class:"field-radiobutton mb-0"},qe=d("label",{for:"none"},"\u65E0",-1),Le={key:0,class:"field"},ze=d("label",{for:"fixed-key"},"\u56FA\u5B9A\u5BC6\u94A5",-1),Re={class:"field"},Me=d("label",{for:"password"},"\u7BA1\u7406\u5458\u5BC6\u7801",-1),Je={class:"field"},Ge=d("label",{for:"notice"},"\u516C\u544AID",-1),Qe={class:"field"},We=d("label",{for:"dynamic-key-timeout"},[B("\u52A8\u6001\u5BC6\u94A5\u6709\u6548\u65F6\u957F"),d("code",null,"(\u79D2)")],-1),Xe={class:"field"},Ye=d("label",{for:"real-url-timeout"},[B("\u771F\u5B9E\u94FE\u63A5\u5B58\u50A8\u65F6\u95F4"),d("code",null,"(\u79D2)")],-1),Ze={class:"field"},et=d("label",{for:"user-agent"},[B("\u89E3\u6790 UA"),d("code",null,"(UA \u4E2D\u7684\u4EA7\u54C1\u6807\u8BC6\u5FC5\u987B\u4E3A\uFF1Anetdisk)")],-1),tt={class:"field"},at=d("label",{for:"cookie"},"Cookie",-1),nt={class:"field"},it=d("h5",null,"\u542F\u7528",-1),ht=X({__name:"SystemManager",setup(t){const e=Y(),a=I(!1),i=I(0),l=I([]),n=te();Z(()=>{setTimeout(async()=>{try{n.default("\u6B63\u5728\u52A0\u8F7D\u2026\u2026");const{data:c}=(await ee()).data,v=c.map(r=>({...r,is_active:Boolean(r.is_active),new:!1}));l.value.push(...v),n.clear()}catch{}},888)});const o=()=>{i.value=l.value.length,l.value.push({id:void 0,admin_password:"",fixed_key:"",is_active:!1,key_last_time:"0",normal_cookie:"",notice_id:"0",parse_ua:"",real_url_last_time:"0",requires_key:"none",new:!0})},s=async c=>{try{a.value=!0,n.default("\u6B63\u5728\u4FDD\u5B58\u2026\u2026");let v;if(c.new||c.id==null){const r=(await ae(c)).data,{id:y}=r.data;v=r.code,c.new=!1,y&&(c.id=y)}else v=(await ne(c,c.id)).data.code;v===1&&(n.clear(),n.success("\u4FDD\u5B58\u6210\u529F\uFF01"))}catch(v){console.error(v)}a.value=!1},D=async c=>{if(c.is_active){const r=l.value.findIndex(y=>y.id!==c.id&&y.is_active);if(r>-1){if(c.id===void 0){c.is_active=!1,n.warn("\u8BF7\u5148\u4FDD\u5B58\u8BE5\u914D\u7F6E\u540E\u518D\u542F\u7528\uFF01");return}n.default("\u6B63\u5728\u914D\u7F6E\u2026\u2026"),l.value[r].is_active=!1,c.is_active=!0;try{await ie(c.id),n.success(`\u5F53\u524D\u914D\u7F6E\u5DF2\u8BBE\u4E3A\u4E3B\u8981\u914D\u7F6E\uFF0C\u539F\u914D\u7F6E\uFF1A${r+1} \u5DF2\u5173\u95ED\u3002`)}catch{n.warn("\u542F\u7528\u5931\u8D25\uFF01")}}return}l.value.find(r=>r.is_active)===void 0&&(c.is_active=!0,n.warn("\u5F53\u524D\u914D\u7F6E\u4E3A\u4E3B\u8981\u914D\u7F6E\uFF0C\u4E0D\u80FD\u5173\u95ED\u3002"))},F=(c,v,r)=>{e.require({target:c.target,message:"\u60A8\u8981\u5220\u9664\u6B64\u914D\u7F6E\u5417\uFF1F",icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:"\u53D6\u6D88",acceptLabel:"\u786E\u5B9A",accept:async()=>{if(v.new||v.id==null)l.value.splice(r,1);else{a.value=!0;try{await re(v.id),l.value.splice(r,1),n.success("\u5220\u9664\u6210\u529F\uFF01")}catch{n.warn("\u5220\u9664\u5931\u8D25\uFF01")}a.value=!1}},reject:()=>{}})};return(c,v)=>(f(),m("div",Ie,[h(p(oe),null,{default:E(()=>[h(p(N),{"active-index":i.value},{default:E(()=>[(f(!0),m(O,null,j(l.value,(r,y)=>(f(),A(p($),{header:`\u914D\u7F6E-${y+1}`},{default:E(()=>[d("div",xe,[d("div",Pe,[Ve,d("div",Be,[d("div",Se,[d("div",Ue,[h(p(P),{value:"dynamic",modelValue:r.requires_key,"onUpdate:modelValue":u=>r.requires_key=u},null,8,["modelValue","onUpdate:modelValue"]),He])]),d("div",Ke,[d("div",Oe,[h(p(P),{value:"fixed",modelValue:r.requires_key,"onUpdate:modelValue":u=>r.requires_key=u},null,8,["modelValue","onUpdate:modelValue"]),je])]),d("div",Ne,[d("div",$e,[h(p(P),{value:"none",modelValue:r.requires_key,"onUpdate:modelValue":u=>r.requires_key=u},null,8,["modelValue","onUpdate:modelValue"]),qe])])])]),r.requires_key==="fixed"?(f(),m("div",Le,[ze,h(p(_),{type:"text",modelValue:r.fixed_key,"onUpdate:modelValue":u=>r.fixed_key=u},null,8,["modelValue","onUpdate:modelValue"])])):k("",!0),d("div",Re,[Me,h(p(_),{type:"password",modelValue:r.admin_password,"onUpdate:modelValue":u=>r.admin_password=u},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Je,[Ge,h(p(_),{type:"number",modelValue:r.notice_id,"onUpdate:modelValue":u=>r.notice_id=u},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Qe,[We,h(p(_),{type:"number",modelValue:r.key_last_time,"onUpdate:modelValue":u=>r.key_last_time=u},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Xe,[Ye,h(p(_),{type:"number",modelValue:r.real_url_last_time,"onUpdate:modelValue":u=>r.real_url_last_time=u},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Ze,[et,h(p(_),{type:"text",modelValue:r.parse_ua,"onUpdate:modelValue":u=>r.parse_ua=u},null,8,["modelValue","onUpdate:modelValue"])]),d("div",tt,[at,h(p(le),{placeholder:"",autoResize:!0,rows:"3",cols:"30",modelValue:r.normal_cookie,"onUpdate:modelValue":u=>r.normal_cookie=u},null,8,["modelValue","onUpdate:modelValue"])]),d("div",nt,[it,h(p(q),{disabled:a.value,modelValue:r.is_active,"onUpdate:modelValue":u=>r.is_active=u,onChange:u=>D(r)},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])]),h(p(U)),h(p(x),{label:"\u4FDD\u5B58",loading:a.value,onClick:u=>s(r)},null,8,["loading","onClick"]),h(p(x),{class:"mt-2",label:"\u5220\u9664",loading:a.value,onClick:u=>F(u,r,y),severity:"danger"},null,8,["loading","onClick"])])]),_:2},1032,["header"]))),256))]),_:1},8,["active-index"]),h(p(U)),h(p(x),{label:"\u6DFB\u52A0\u65B0\u914D\u7F6E",onClick:o})]),_:1})]))}});export{ht as default};
