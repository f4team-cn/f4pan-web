import{d as N,al as T,r as i,w as q,z,h as d,i as t,o as w,f as F,g as e,s as K,j as $,a9 as O,a1 as V,am as H,an as J,k,B as I,x as R,e as E,m as S,p as G,ad as Q,_ as W,ao as X,L as D,y as x,ap as Y,aq as Z}from"./index.11a12647.js";import{s as P}from"./card.esm.d12aa2af.js";import{s as ee,a as C}from"./column.esm.0cd960b8.js";import{s as te}from"./textarea.esm.5236e5af.js";import{b as ae}from"./dropdown.esm.349dd9e4.js";import"./index.esm.ea66545a.js";import"./radiobutton.esm.2c6d9749.js";import"./index.esm.f152c46b.js";const ue={class:"flex align-items-center gap-3 mb-5"},le=F("label",{for:"email",class:"font-semibold w-6rem"},"\u6807\u9898",-1),oe={class:"flex align-items-center gap-3 mb-5"},se=F("label",{for:"email",class:"font-semibold w-6rem"},"\u516C\u544A\u5185\u5BB9",-1),ne={class:"flex justify-content-end gap-2"},ie=N({__name:"NoticeEditDialog",props:{type:{},title:{},content:{},id:{},modelValue:{type:Boolean}},emits:["update:modelValue","operation:done"],setup(s,{emit:g}){const a=s,n=g,u=T({get:()=>a.modelValue,set:p=>n("update:modelValue",p)}),l=i(""),r=i(""),m=k(),b=i(!1),h=()=>{b.value=!1,u.value=!1,l.value="",r.value=""},y=async()=>{if(V(l.value)||V(r.value)){m.warn("\u8BF7\u8F93\u5165\u5B8C\u6574\uFF01");return}if(a.type==="edit"&&a.id===void 0){u.value=!1,m.warn("\u7CFB\u7EDF\u9519\u8BEF\uFF01");return}b.value=!0,a.type==="edit"?H(l.value,r.value,a.id).then(()=>m.success("\u4FEE\u6539\u6210\u529F\uFF01")).finally(h):J(l.value,r.value).then(()=>m.success("\u6DFB\u52A0\u6210\u529F\uFF01")).finally(h)};return q(u,p=>{p?(l.value=a.title,r.value=a.content):n("operation:done")}),(p,c)=>(w(),z(t(O),{visible:u.value,"onUpdate:visible":c[3]||(c[3]=f=>u.value=f),modal:"",header:`${p.type==="new"?"\u65B0\u5EFA":"\u7F16\u8F91"}\u516C\u544A`,style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:d(()=>[F("div",ue,[le,e(t(K),{class:"flex-auto",autocomplete:"off",type:"text",modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=f=>l.value=f)},null,8,["modelValue"])]),F("div",oe,[se,e(t(te),{placeholder:"",modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=f=>r.value=f),autoResize:!0,rows:"3",cols:"55"},null,8,["modelValue"])]),F("div",ne,[e(t($),{type:"button",label:"\u53D6\u6D88",severity:"secondary",onClick:c[2]||(c[2]=f=>u.value=!1),loading:b.value},null,8,["loading"]),e(t($),{type:"button",label:"\u786E\u8BA4",onClick:y,loading:b.value},null,8,["loading"])])]),_:1},8,["visible","header"]))}});var re={root:"p-inputgroup"},de=I.extend({name:"inputgroup",classes:re}),ce={name:"BaseInputGroup",extends:R,style:de,provide:function(){return{$parentInstance:this}}},j={name:"InputGroup",extends:ce,inheritAttrs:!1};function pe(s,g,a,n,u,l){return w(),E("div",G({class:s.cx("root")},s.ptmi("root")),[S(s.$slots,"default")],16)}j.render=pe;var ve={root:"p-inputgroup-addon"},me=I.extend({name:"inputgroupaddon",classes:ve}),fe={name:"BaseInputGroupAddon",extends:R,style:me,provide:function(){return{$parentInstance:this}}},L={name:"InputGroupAddon",extends:fe,inheritAttrs:!1};function Fe(s,g,a,n,u,l){return w(),E("div",G({class:s.cx("root")},s.ptmi("root")),[S(s.$slots,"default")],16)}L.render=Fe;const ge={class:"col-12"},ye={class:"md:flex md:flex-row md:flex-nowrap"},xe=N({__name:"NoticeManager",setup(s){const g=i(!1),a=i([]),n=k(),u=i(!1),l=i(""),r=i(""),m=i(void 0),b=Q(),h=i("edit"),y=i(void 0),p=i(!1),c=v=>{l.value=v.title,r.value=v.content,m.value=v.id,u.value=!0},f=(v,B)=>{b.require({target:v.target,message:"\u60A8\u8981\u5220\u9664\u6B64\u516C\u544A\u5417\uFF1F",icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:"\u53D6\u6D88",acceptLabel:"\u786E\u5B9A",accept:async()=>{try{n.default("\u6B63\u5728\u5220\u9664\u2026\u2026"),await Y(B.id),n.success("\u5220\u9664\u6210\u529F");const o=a.value.findIndex(A=>A.id===B.id);a.value.splice(o,1)}catch{n.warn("\u5220\u9664\u5931\u8D25\uFF01")}},reject:()=>{}})},_=async()=>{try{g.value=!0;const v=await X();v.data.data.length>0&&(a.value.length=0,a.value.push(...v.data.data))}catch{n.warn("\u52A0\u8F7D\u516C\u544A\u5931\u8D25\uFF01\u8BF7\u7A0D\u540E\u5237\u65B0\u9875\u9762\uFF01")}finally{g.value=!1}},U=()=>{l.value="",r.value="",m.value=void 0,h.value="new",u.value=!0},M=async()=>{if(y.value==null){n.warn("\u8BF7\u9009\u62E9\u516C\u544A\uFF01");return}p.value=!0;try{await Z(y.value.id),n.success("\u8BBE\u7F6E\u6210\u529F\uFF01")}catch{y.value=void 0,n.warn("\u8BBE\u7F6E\u5931\u8D25\uFF01")}p.value=!1};return W(_),(v,B)=>(w(),E("div",ge,[e(ie,{"onOperation:done":_,title:l.value,content:r.value,modelValue:u.value,"onUpdate:modelValue":B[0]||(B[0]=o=>u.value=o),type:h.value,id:m.value},null,8,["title","content","modelValue","type","id"]),e(t(P),null,{content:d(()=>[e(t(ee),{value:a.value,dataKey:"id",tableStyle:"min-width: 60rem",loading:g.value},{loading:d(()=>[D(" \u6B63\u5728\u52A0\u8F7D\uFF0C\u8BF7\u7A0D\u540E\u2026\u2026 ")]),empty:d(()=>[D(" \u6682\u65F6\u6CA1\u6709\u6570\u636E\uFF0C\u6DFB\u52A0\u4E00\u4E2A\u5427\uFF01 ")]),header:d(()=>[F("div",ye,[e(t($),{icon:"pi pi-plus",label:"\u6DFB\u52A0\u516C\u544A",class:"mr-2 mb-2 flex-grow-0",onClick:U}),e(t(j),{class:"flex-grow-0"},{default:d(()=>[e(t(L),null,{default:d(()=>[D("\u6FC0\u6D3B\u7684\u516C\u544A")]),_:1}),e(t(ae),{options:a.value,optionLabel:"title",placeholder:"\u9009\u62E9\u516C\u544A",modelValue:y.value,"onUpdate:modelValue":B[1]||(B[1]=o=>y.value=o)},{option:d(o=>[F("span",null,x(o.option.id)+" - "+x(o.option.title),1)]),_:1},8,["options","modelValue"]),e(t($),{label:"\u786E\u5B9A",onClick:M,loading:p.value},null,8,["loading"])]),_:1})])]),default:d(()=>[e(t(C),{field:"id",header:"ID",sortable:!0}),e(t(C),{field:"title",header:"\u6807\u9898"}),e(t(C),{header:"\u5185\u5BB9"},{body:d(o=>[F("p",null,x(o.data.content.substring(0,100)),1)]),_:1}),e(t(C),{header:"\u64CD\u4F5C",headerStyle:"width:4rem"},{body:d(o=>[e(t($),{icon:"pi pi-eye",rounded:"",class:"mb-2 mr-2",onClick:A=>c(o.data)},null,8,["onClick"]),e(t($),{icon:"pi pi-trash",severity:"danger",rounded:"",class:"mb-2 mr-2",onClick:A=>f(A,o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","loading"])]),_:1})]))}});export{xe as default};
