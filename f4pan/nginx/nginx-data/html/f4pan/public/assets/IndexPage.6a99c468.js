import{s as A}from"./panel.esm.ee925fe8.js";import{s as B}from"./menu.esm.ae771c92.js";import{d as k,u as x,a as y,r as n,b as V,c as D,w as P,e as S,f as s,g as d,h,i as c,o as U,s as v,j as E,k as $}from"./index.11a12647.js";import{g as q}from"./parse.521772ef.js";import"./index.esm.b3e12656.js";import"./index.esm.f152c46b.js";function R(p){var i,m;const o={},a=/https?:\/\/(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\\(),]|%[0-9a-fA-F][0-9a-fA-F])+/,l=/提取码([:：])\s*(([a-zA-Z]|[0-9]){4})/;if(!a.test(p))return o;let r=(i=a.exec(p))==null?void 0:i[0];if(r===void 0)return o;let t=new URL(r);return t.host!=="pan.baidu.com"||(o.pwd=t.searchParams.get("pwd")||((m=l.exec(p))==null?void 0:m[2])||"",o.surl=t.searchParams.has("surl")?`1${t.searchParams.get("surl")}`:t.pathname.substring(3)),o}const I={class:"main-container"},L={class:"main"},z=s("div",{class:"title"},[s("span",{class:"font-bold"},"F4Pan")],-1),N=["disabled"],Z=s("span",{class:"pi pi-cog"},null,-1),j=[Z],M={class:"p-fluid"},G={class:"field"},H=s("label",{for:"disk-url"},"\u7F51\u76D8\u94FE\u63A5",-1),J={class:"field"},K=s("label",{for:"disk-password"},"\u7F51\u76D8\u5BC6\u7801",-1),ee=k({__name:"IndexPage",setup(p){const o=x(),a=y(),l=n(""),r=n(""),t=n(""),i=n(!1),m=V(),g=$(),F=D(),f=n(),b=n([{label:"\u66F4\u591A\u64CD\u4F5C",items:[{label:"\u516C\u544A",icon:"pi pi-bell",command:()=>{a.noticeDialog=!a.noticeDialog}},{label:"\u767B\u5F55\u540E\u53F0",icon:"pi pi-cloud",command:()=>{a.adminLogin=!a.adminLogin}}]}]),w=u=>{var e;(e=f==null?void 0:f.value)==null||e.toggle(u)},C=async()=>{let u;F.requires_key!=="none"&&(a.parseVerify=!0,u=await a.awaitForParseVerify(),u.length===0)||(i.value=!0,g.default("\u6B63\u5728\u52A0\u8F7D\u2026\u2026"),q(t.value,l.value,u).then(({data:e})=>{m.req_id=e.data,o.push({name:"Parsed",params:{reqId:e.data,surl:t.value,pwd:l.value}})}))};return P(r,u=>{const e=R(u);e.pwd&&(l.value=e.pwd,g.success("\u8BC6\u522B\u5230\u5BC6\u7801\uFF0C\u5DF2\u81EA\u52A8\u586B\u5145\uFF01")),e.surl&&(t.value=e.surl)}),(u,e)=>(U(),S("div",I,[s("div",L,[d(c(A),null,{header:h(()=>[z]),icons:h(()=>[d(c(B),{ref_key:"menu",ref:f,id:"overlay_menu",model:b.value,popup:!0},null,8,["model"]),s("button",{class:"p-panel-header-icon p-link mr-2",onClick:w,disabled:i.value},j,8,N)]),default:h(()=>[s("div",M,[s("div",G,[H,d(c(v),{type:"text",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=_=>r.value=_)},null,8,["modelValue"])]),s("div",J,[K,d(c(v),{type:"text",modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=_=>l.value=_)},null,8,["modelValue"])]),d(c(E),{onClick:C,label:"\u63D0\u4EA4"})])]),_:1})])]))}});export{ee as default};
